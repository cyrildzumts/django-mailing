{% extends "product_base.html"%}
{% load i18n %}
{% load catalog_tags %}


{% block ACTIONS %}
{% if perms.catalog.add_campaign %}
<a class="margin" href="{% url 'dashboard:campaign-create'%}"> <i class="fas fa-plus icon"></i><span>{% trans "New Campaign" %}</span></a>
{% endif %}
<a class="margin" href="{% url 'dashboard:campaign-generate-csv' campaign.campaign_uuid %}"><i class="fas fa-plus icon"></i><span>{% trans "CSV" %}</span></a>
<a class="margin" href="{{campaign.get_update_url}}"><i class="fas fa-refresh icon"></i><span>{% trans "Update" %}</span></a>
{% endblock ACTIONS %}


{% block CONTENT_MAIN %}

<div class="container">
    <div class="mat-box">
        <div class="grid">
            <div class="box">
                <p class="entry"><span class="key">{% trans "Name" %}</span> <span class="value">{{campaign.name}}</span></p>
                <p class="entry"><span class="key">{% trans "Title" %}</span> <span class="value">{{campaign.title}}</span></p>
                <p class="entry"><span class="key">{% trans "Active" %}</span> <span class="value">{{campaign.is_active|yesno}}</span></p>
                <p class="entry"><span class="key">{% trans "Start at" %}</span> <span class="value">{{campaign.start_at|date}}</span></p>
                <p class="entry"><span class="key">{% trans "End at" %}</span> <span class="value">{{campaign.end_at|date}}</span></p>
                <p class="entry"><span class="key">{% trans "Created" %}</span> <span class="value">{{campaign.created_at|date:"F j, Y"}}</span></p>
                <p class="entry"><span class="key">{% trans "Views" %}</span> <span class="value">{{campaign.view_count}}</span></p>
                <p class="entry"><span class="key">{% trans "Description" %}</span> <span class="value">{{campaign.description}}</span></p>
            </div>
            <div class="grid">
                {% if campaign.image or campaign.image_small %}
                {% if campaign.image %}
                <div class="padding">
                    <span>{% trans "Desktop Image :" %}</span>
                    <div class="img-wrapper">
                        <img class="img-responsive" src="{{campaign.get_image_url}}" alt="{{campaign.name}}">
                    </div>
                </div>
                {% endif %}
                {% if campaign.image_small %}
                <div class="padding">
                    <span>{% trans "Mobile Image :" %}</span>
                    <div class="img-wrapper">
                        <img class="img-responsive" src="{{campaign.get_image_small_url}}" alt="{{campaign.name}}">
                    </div>
                </div>
                {% endif %}
                {% else %}
                <div class="padding">
                    <span>{% trans "no images" %}</span>
                </div>
                {% endif %}
            </div>
        </div><!--End of grid-->
    </div><!--End mat-box-->
    <div class="mat-box full">
        <h5> {% trans "Campaign Products" %}</h5>
        {% include "tags/admin_products_snippets.html" with product_list=campaign.products.all CHECKED='checked' %}
    </div><!--End mat-box-->
    
    <div class="mat-box full">
        <div class="mat-box-content">
            {% include 'tags/dashboard_products_snippet.html' with ACTIONS_URL=campaign.get_add_products_url ADD_SELECTION=True product_list=products %}
        </div><!--End mat-box-content-->
    </div><!--End mat-box-->
</div>
{% endblock CONTENT_MAIN %}